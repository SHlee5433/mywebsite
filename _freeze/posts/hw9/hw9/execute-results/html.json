{
  "hash": "63ffe37304217aa558e036a52de75f7d",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"LS ë¹…ë°ì´í„° ìŠ¤ì¿¨ Homework 9\"\nauthor: \"ìŠ¹í•™\"\ndate: \"2024-09-10\"\ncategories: [bigdata]\n\n---\n\n## ë¬¸ì œ\n\n**ì¢…ì†ë³€ìˆ˜: ë°±í˜ˆë³‘ ì„¸í¬ ê´€ì¸¡ ë¶ˆê°€ ì—¬ë¶€ (REMISS), 1ì´ë©´ ê´€ì¸¡ ì•ˆë¨ì„ ì˜ë¯¸**\n\n**ë…ë¦½ë³€ìˆ˜:**\n**ê³¨ìˆ˜ì˜ ì„¸í¬ì„± (CELL)**<br>\n**ê³¨ìˆ˜í¸ì˜ ë°±í˜ˆêµ¬ ë¹„ìœ¨ (SMEAR)**<br>\n**ê³¨ìˆ˜ì˜ ë°±í˜ˆë³‘ ì„¸í¬ ì¹¨íˆ¬ ë¹„ìœ¨ (INFIL)**<br>\n**ê³¨ìˆ˜ ë°±í˜ˆë³‘ ì„¸í¬ì˜ ë¼ë²¨ë§ ì¸ë±ìŠ¤ (LI)**<br>\n**ë§ì´ˆí˜ˆì•¡ì˜ ë°±í˜ˆë³‘ ì„¸í¬ ìˆ˜ (BLAST)**<br>\n**ì¹˜ë£Œ ì‹œì‘ ì „ ìµœê³  ì²´ì˜¨ (TEMP)**\n\n## Q1.\n**ë°ì´í„°ë¥¼ ë¡œë“œí•˜ê³ , ë¡œì§€ìŠ¤í‹± íšŒê·€ëª¨ë¸ì„ ì í•©í•˜ê³ , íšŒê·€ í‘œë¥¼ ì‘ì„±í•˜ì„¸ìš”**\n\n::: {#7979d663 .cell execution_count=1}\n``` {.python .cell-code}\n# ì›Œí‚¹ ë””ë ‰í† ë¦¬ í™•ì¸í•˜ê¸°\nimport pandas as pd\nimport statsmodels.api as sm\nimport os\ncwd = os.getcwd()\ncwd\n\n# ë°ì´í„° ë¡œë“œí•˜ê¸°\ndf = pd.read_table('./data/leukemia_remission.txt',delim_whitespace=True)\n\ndf\n\n# ë¡œì§€ìŠ¤í‹± íšŒê·€ëª¨ë¸ ì í•© í›„, íšŒê·€ í‘œ ì‘ì„±\n\nmodel = sm.formula.logit(\"REMISS ~ CELL + SMEAR + INFIL + LI + BLAST + TEMP\", data = df).fit()\n\nprint(model.summary())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOptimization terminated successfully.\n         Current function value: 0.399886\n         Iterations 10\n                           Logit Regression Results                           \n==============================================================================\nDep. Variable:                 REMISS   No. Observations:                   27\nModel:                          Logit   Df Residuals:                       20\nMethod:                           MLE   Df Model:                            6\nDate:                Tue, 10 Sep 2024   Pseudo R-squ.:                  0.3718\nTime:                        14:23:04   Log-Likelihood:                -10.797\nconverged:                       True   LL-Null:                       -17.186\nCovariance Type:            nonrobust   LLR p-value:                   0.04670\n==============================================================================\n                 coef    std err          z      P>|z|      [0.025      0.975]\n------------------------------------------------------------------------------\nIntercept     64.2581     74.965      0.857      0.391     -82.670     211.187\nCELL          30.8301     52.135      0.591      0.554     -71.353     133.013\nSMEAR         24.6863     61.526      0.401      0.688     -95.903     145.275\nINFIL        -24.9745     65.281     -0.383      0.702    -152.923     102.974\nLI             4.3605      2.658      1.641      0.101      -0.849       9.570\nBLAST         -0.0115      2.266     -0.005      0.996      -4.453       4.430\nTEMP        -100.1734     77.753     -1.288      0.198    -252.567      52.220\n==============================================================================\n\nPossibly complete quasi-separation: A fraction 0.11 of observations can be\nperfectly predicted. This might indicate that there is complete\nquasi-separation. In this case some parameters will not be identified.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nC:\\Users\\USER\\AppData\\Local\\Temp\\ipykernel_7484\\3773223679.py:9: FutureWarning:\n\nThe 'delim_whitespace' keyword in pd.read_table is deprecated and will be removed in a future version. Use ``sep='\\s+'`` instead\n\n```\n:::\n:::\n\n\n## Q2.\n**í•´ë‹¹ ëª¨ë¸ì€ í†µê³„ì ìœ¼ë¡œ ìœ ì˜í•œê°€ìš”? ê·¸ ì´ìœ ë¥¼ ê²€ì •í†µê³„ëŸ‰ë¥¼ ì‚¬ìš©í•´ì„œ ì„¤ëª…í•˜ì‹œì˜¤.**\n\n::: {#677d2a5e .cell execution_count=2}\n``` {.python .cell-code}\nfrom scipy.stats import chi2\n# ê²€ì •í†µê³„ëŸ‰ : âˆ’2(â„“(ğ›½)Ì‚ (0) âˆ’ â„“(ğ›½)Ì‚ )  =  -2*(-17.186+10.797)  = 12.779\n1 - chi2.cdf(12.779, df=6)  # 0.0467\n\n# ê²°ë¡  : LLR p-value: 0.0467 < ìœ ì˜ìˆ˜ì¤€ 0.05ë³´ë‹¤ ì‘ìœ¼ë‹ˆê¹Œ í†µê³„ì ìœ¼ë¡œ ìœ ì˜í•˜ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.\n```\n\n::: {.cell-output .cell-output-display execution_count=38}\n```\nnp.float64(0.0466828104726148)\n```\n:::\n:::\n\n\n## Q3.\n**ìœ ì˜ìˆ˜ì¤€ 0.2ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í†µê³„ì ìœ¼ë¡œ ìœ ì˜í•œ ë³€ìˆ˜**\n\n::: {#02d0658e .cell execution_count=3}\n``` {.python .cell-code}\n# p-valueê°€ 0.2ë³´ë‹¤ ì‘ì€ ë³€ìˆ˜ = LI, TEMP\n```\n:::\n\n\n## Q4.\n**ë‹¤ìŒ í™˜ìì— ëŒ€í•œ ì˜¤ì¦ˆëŠ” ì–¼ë§ˆì¸ê°€ìš”?**<br>\n**CELL (ê³¨ìˆ˜ì˜ ì„¸í¬ì„±): 65%**<br>\n**SMEAR (ê³¨ìˆ˜í¸ì˜ ë°±í˜ˆêµ¬ ë¹„ìœ¨): 45%**<br>\n**INFIL (ê³¨ìˆ˜ì˜ ë°±í˜ˆë³‘ ì„¸í¬ ì¹¨íˆ¬ ë¹„ìœ¨): 55%**<br>\n**LI (ê³¨ìˆ˜ ë°±í˜ˆë³‘ ì„¸í¬ì˜ ë¼ë²¨ë§ ì¸ë±ìŠ¤): 1.2**<br>\n**BLAST (ë§ì´ˆí˜ˆì•¡ì˜ ë°±í˜ˆë³‘ ì„¸í¬ ìˆ˜): 1.1ì„¸í¬/Î¼L**<br>\n**TEMP (ì¹˜ë£Œ ì‹œì‘ ì „ ìµœê³  ì²´ì˜¨): 0.9**\n\n::: {#41f117b6 .cell execution_count=4}\n``` {.python .cell-code}\nimport numpy as np\n\nodds = np.exp(64.258 + 30.830 * 0.65 + 24.686 * 0.45 + (-24.975) * 0.55 + 4.361 * 1.2 + (-0.012) * 1.1 + (-100.173) * 0.9)\n\nodds  # 0.038\n```\n\n::: {.cell-output .cell-output-display execution_count=40}\n```\nnp.float64(0.03816829812256951)\n```\n:::\n:::\n\n\n## Q5. \n**ìœ„ í™˜ìì˜ í˜ˆì•¡ì—ì„œ ë°±í˜ˆë³‘ ì„¸í¬ê°€ ê´€ì¸¡ë˜ì§€ ì•Šì€ í™•ë¥ ì€ ì–¼ë§ˆì¸ê°€ìš”?**\n\n::: {#8fddefed .cell execution_count=5}\n``` {.python .cell-code}\nodds / (1 + odds) # 0.037\n```\n\n::: {.cell-output .cell-output-display execution_count=41}\n```\nnp.float64(0.0367650391478851)\n```\n:::\n:::\n\n\n## Q6. \n**TEMP ë³€ìˆ˜ì˜ ê³„ìˆ˜ëŠ” ì–¼ë§ˆì´ë©°, í•´ë‹¹ ê³„ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ TEMP ë³€ìˆ˜ê°€ ë°±í˜ˆë³‘ ì¹˜ë£Œì— ëŒ€í•œ ì˜í–¥ì„ ì„¤ëª…í•˜ì‹œì˜¤.**\n\n::: {#c8fbc738 .cell execution_count=6}\n``` {.python .cell-code}\n# TEMP ë³€ìˆ˜ì˜ ê³„ìˆ˜ = -100.173\n# ì˜¤ì¦ˆë¹„ 3.127\n# TEMPê°€ 1 ì˜¬ë¼ê°€ë©´ ë¡œê·¸ ì˜¤ì¦ˆëŠ” 157.86ë§Œí¼ ê°ì†Œí•˜ë©°, ë°±í˜ˆë³‘ ìƒíƒœì— ë„ë‹¬í•  ê°€ëŠ¥ì„±ì´ í¬ê²Œ ì¤„ì–´ë“ ë‹¤\n\nnp.exp(-100.173)\n```\n\n::: {.cell-output .cell-output-display execution_count=42}\n```\nnp.float64(3.129095833510944e-44)\n```\n:::\n:::\n\n\n## Q7. \n**CELL ë³€ìˆ˜ì˜ 99% ì˜¤ì¦ˆë¹„ì— ëŒ€í•œ ì‹ ë¢°êµ¬ê°„ì„ êµ¬í•˜ì‹œì˜¤.**\n\n::: {#5c0da56e .cell execution_count=7}\n``` {.python .cell-code}\ncell_beta = 30.830\nz = 2.58\nstd_err = 52.135\n\nupper = cell_beta + z * std_err\nlower = cell_beta - z * std_err\n\n# CELL ë³€ìˆ˜ ê³„ìˆ˜ì˜ ì‹ ë¢°êµ¬ê°„\nupper # 165.34\nlower # -103.68\n\n# CELL ë³€ìˆ˜ ì˜¤ì¦ˆë¹„ì— ëŒ€í•œ ì‹ ë¢°êµ¬ê°„\n\nnp.exp(upper), np.exp(lower) \n```\n\n::: {.cell-output .cell-output-display execution_count=43}\n```\n(np.float64(6.390154186383071e+71), np.float64(9.399103174215862e-46))\n```\n:::\n:::\n\n\n## Q8. \n**ì£¼ì–´ì§„ ë°ì´í„°ì— ëŒ€í•˜ì—¬ ë¡œì§€ìŠ¤í‹± íšŒê·€ ëª¨ë¸ì˜ ì˜ˆì¸¡ í™•ë¥ ì„ êµ¬í•œ í›„, 50% ì´ìƒì¸ ê²½ìš° 1ë¡œ ì²˜ë¦¬í•˜ì—¬, í˜¼ë™ í–‰ë ¬ë¥¼ êµ¬í•˜ì‹œì˜¤.**\n\n::: {#bc018794 .cell execution_count=8}\n``` {.python .cell-code}\nfrom sklearn.metrics import confusion_matrix\n\n# 1. ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì˜ˆì¸¡ í™•ë¥ ì„ ê³„ì‚°\npred_probs = model.predict(df)\n\n# 2. 50% ê¸°ì¤€ìœ¼ë¡œ ì´ì§„í™” (0 ë˜ëŠ” 1ë¡œ ë³€í™˜)\npredictions = [1 if prob > 0.5 else 0 for prob in pred_probs]\n\n# 3. ì‹¤ì œ ê°’ (df['REMISS'])ê³¼ ì˜ˆì¸¡ ê°’ (predictions) ë¹„êµí•˜ì—¬ í˜¼ë™ í–‰ë ¬ ê³„ì‚°\nconf_matrix = confusion_matrix(df['REMISS'], predictions)\n\n# í˜¼ë™ í–‰ë ¬ ì¶œë ¥\nconf_matrix\n```\n\n::: {.cell-output .cell-output-display execution_count=44}\n```\narray([[15,  3],\n       [ 4,  5]])\n```\n:::\n:::\n\n\n## Q9. \n**í•´ë‹¹ ëª¨ë¸ì˜ AccuracyëŠ” ì–¼ë§ˆì¸ê°€ìš”?**\n\n::: {#ca06fe94 .cell execution_count=9}\n``` {.python .cell-code}\n# Accuracy = ì „ì²´ ì˜ˆì¸¡ì—ì„œ ì˜³ì€ ì˜ˆì¸¡ì˜ ë¹„ìœ¨\n\nAccuracy = (15 + 5) / (15 + 3 + 4 + 5)\nAccuracy # 0.741\n```\n\n::: {.cell-output .cell-output-display execution_count=45}\n```\n0.7407407407407407\n```\n:::\n:::\n\n\n## Q10. \n**í•´ë‹¹ ëª¨ë¸ì˜ F1 Scoreë¥¼ êµ¬í•˜ì„¸ìš”.**\n\n::: {#2fbec65a .cell execution_count=10}\n``` {.python .cell-code}\npre = 5 / (5 + 3)\nre = 5 / (5 + 4)\n\nF1 = 2 * (pre * re) / (pre + re)\nF1 # 0.588\n```\n\n::: {.cell-output .cell-output-display execution_count=46}\n```\n0.5882352941176471\n```\n:::\n:::\n\n\n",
    "supporting": [
      "hw9_files"
    ],
    "filters": [],
    "includes": {}
  }
}